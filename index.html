<!DOCTYPE html>

<html dir="rtl" lang="ar">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>مقارنة وحدات Whiteout Survival</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet"/>
<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.0.0/css/all.min.css" rel="stylesheet"/>
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&amp;display=swap" rel="stylesheet"/>
<style>
        /* RTL specific adjustments */
        :root {
            --helios-color: #d9534f;
            --helios-dark: #c9302c;
            --helios-light: #f9e5e4;
            --dominant-color: #f0ad4e;
            --dominant-dark: #ec971f;
            --dominant-light: #fcf8e3;
            --background-color: #e3f2fd;
            --primary-text: #333;
            --secondary-text: #666;
            --border-color: #ddd;
            --card-bg: #fff;
            --accent-color: #337ab7;
        }
        
        body {
            font-family: 'Cairo', sans-serif;
            background-color: var(--background-color);
            color: var(--primary-text);
            direction: rtl;
            text-align: right;
            line-height: 1.6;
        }
        
        .form-control, .form-select {
            text-align: right;
        }
        
        .nav-tabs .nav-link {
            margin-right: 0;
            margin-left: 5px;
        }
        
        .nav-tabs .nav-link i {
            margin-left: 5px;
            margin-right: 0;
        }
        
        .form-group label {
            display: block;
            text-align: right;
        }
        
        .form-select {
            background-position: left 0.75rem center;
        }
        
        .social-links {
            justify-content: flex-start;
        }
        
        .social-link {
            margin-left: 0;
            margin-right: 20px;
        }
        
        .social-link:first-child {
            margin-right: 0;
        }
        
        .helios-battle {
            border-left: none;
            border-right: 4px solid var(--helios-color);
        }
        
        .dominant-battle {
            border-left: none;
            border-right: 4px solid var(--dominant-color);
        }
        
        /* Main styles */
        /* Banner */
        .banner-container {
            width: 100%;
            height: 250px;
            margin-bottom: 30px;
            overflow: hidden;
            position: relative;
        }
        
        .banner-image {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden;
        }
        
        .banner-img {
            width: 100%;
            height: auto;
            display: block;
            object-fit: cover;
        }
        
        /* Main container */
        .main-container {
            background-color: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 40px;
        }
        
        /* Navigation Tabs */
        .nav-tabs {
            border-bottom: 2px solid var(--border-color);
            margin-bottom: 30px;
        }
        
        .nav-tabs .nav-link {
            color: var(--secondary-text);
            border: none;
            padding: 12px 20px;
            margin-right: 5px;
            border-radius: 5px 5px 0 0;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .nav-tabs .nav-link:hover {
            background-color: rgba(0, 0, 0, 0.03);
        }
        
        .nav-tabs .nav-link.active {
            color: var(--accent-color);
            background-color: #fff;
            border-bottom: 3px solid var(--accent-color);
        }
        
        .nav-tabs .nav-link i {
            margin-left: 5px;
        }
        
        /* Cards */
        .card {
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--border-color);
            margin-bottom: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        
        .card-header {
            padding: 15px 20px;
            font-weight: 700;
            border-bottom: 1px solid var(--border-color);
        }
        
        .card-body {
            padding: 20px;
        }
        
        /* Unit cards */
        .unit-card .card-header {
            color: #fff;
        }
        
        .helios-card .card-header {
            background-color: var(--helios-color);
        }
        
        .dominant-card .card-header {
            background-color: var(--dominant-color);
        }
        
        .faction-icon {
            width: 30px;
            height: 30px;
            margin-left: 5px;
            vertical-align: middle;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .helios-header {
            background-color: var(--helios-color);
            color: white;
        }
        
        .dominant-header {
            background-color: var(--dominant-color);
            color: white;
        }
        
        /* Tables */
        .table {
            margin-bottom: 0;
        }
        
        .stats-table th {
            vertical-align: middle;
            text-align: center;
            background-color: #f8f9fa;
        }
        
        .stats-table td {
            vertical-align: middle;
            text-align: center;
        }
        
        .comparison-table {
            background-color: #fff;
        }
        
        .comparison-table th {
            background-color: #f8f9fa;
            text-align: center;
        }
        
        .comparison-table td {
            text-align: center;
        }
        
        /* Form elements */
        .form-group label {
            font-weight: 600;
            margin-bottom: 5px;
            color: var(--secondary-text);
        }
        
        .form-select, .form-control {
            border-radius: 5px;
            padding: 10px 15px;
            border: 1px solid #ced4da;
        }
        
        .btn {
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
        }
        
        .btn-primary:hover {
            background-color: #286090;
            border-color: #204d74;
        }
        
        /* Chart container */
        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 20px;
        }
        
        /* Battle simulation section */
        .battle-card {
            background-color: #f9f9f9;
        }
        
        .battle-stats {
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
        }
        
        .helios-battle {
            background-color: var(--helios-light);
            border-right: 4px solid var(--helios-color);
        }
        
        .dominant-battle {
            background-color: var(--dominant-light);
            border-right: 4px solid var(--dominant-color);
        }
        
        .conclusion-card {
            border: none;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        }
        
        .conclusion-card .card-header {
            color: #fff;
            background-color: var(--accent-color);
        }
        
        .battle-conclusion {
            font-size: 18px;
            padding: 15px;
            font-weight: 600;
        }
        
        /* Footer */
        .footer {
            background-color: #2c3e50;
            color: #fff;
            padding: 40px 0;
        }
        
        .footer h4 {
            font-weight: 700;
            margin-bottom: 20px;
        }
        
        .social-links {
            display: flex;
            justify-content: flex-start;
        }
        
        .social-link {
            color: #fff;
            margin-right: 20px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .social-link:hover {
            color: var(--dominant-color);
        }
        
        .copyright {
            margin: 0;
            color: rgba(255, 255, 255, 0.6);
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .banner-container {
                height: 180px;
            }
            
            .main-container {
                padding: 15px;
            }
            
            .social-links {
                justify-content: center;
                margin-top: 20px;
            }
            
            .nav-tabs .nav-link {
                padding: 10px 12px;
                font-size: 14px;
            }
            
            .card-header {
                padding: 12px 15px;
            }
            
            .card-body {
                padding: 15px;
            }
            
            .chart-container {
                height: 250px;
            }
            
            .social-links {
                justify-content: center;
            }
            
            .social-link {
                margin-right: 10px;
                margin-left: 10px;
            }
        }
        
        @media (max-width: 576px) {
            .banner-container {
                height: 150px;
            }
            
            .nav-tabs {
                flex-wrap: nowrap;
                overflow-x: auto;
            }
            
            .nav-tabs .nav-link {
                white-space: nowrap;
                padding: 8px 10px;
                font-size: 13px;
            }
            
            .battle-stats {
                margin-bottom: 10px;
            }
        }
    </style>
<!-- Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-19HNCP3BE3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-19HNCP3BE3');
</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-19HNCP3BE3"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-19HNCP3BE3');
</script><script>
document.addEventListener("contextmenu", function(e){
  e.preventDefault();
});
document.addEventListener("copy", function(e){
  e.preventDefault();
});
</script>
<style>
  .subscribed {
    opacity: 0.5;
    pointer-events: none;
  }
</style>
</head>
<body>
<div id="subscriptionOverlay" style="position:fixed;top:0;left:0;width:100%;height:100%;
background-color:rgba(0,0,0,0.6);backdrop-filter:blur(3px);z-index:99999;display:flex;flex-direction:column;
align-items:center;justify-content:center;color:white;font-family:'Cairo',sans-serif;text-align:center;padding:20px;">
    <h2 style="margin-bottom:20px;">يرجى الاشتراك في القناة لتجربة محاكاة القتال</h2>
    <div style="display:flex;gap:20px;flex-wrap:wrap;justify-content:center;">
        <a id="subscribeYTBtn" class="subscribe-btn" href="#"
           onclick="document.getElementById('subscriptionOverlay').style.display='none';"
           style="background-color:red;color:white;padding:15px 25px;border:none;
           border-radius:8px;font-size:18px;text-decoration:none;">
           اشترك في YouTube
        </a>
        <a id="joinDiscordBtn" class="discord-btn" href="#"
           onclick="document.getElementById('subscriptionOverlay').style.display='none';"
           style="background-color:#5865F2;color:white;padding:15px 25px;border:none;
           border-radius:8px;font-size:18px;text-decoration:none;">
           انضم إلى Discord
        </a>
    </div>
</div>
<div style="position: fixed; top: 10px; left: 10px; z-index: 1000;"><a class="btn btn-danger" href="https://youtube.com/@whiteoutsurvivel" style="margin-right: 10px;" target="_blank">اشترك في القناة</a><a class="btn btn-primary" href="https://discord.gg/yEKvcA5eBq" style="margin-right: 10px;" target="_blank">انضم إلى Discord</a></div>
<!-- Banner -->
<header class="banner-container">
<div class="banner-image">
<img alt="Whiteout Survival Banner" class="banner-img" src="https://i.imgur.com/9RcBRS1.gif"/>
</div>
</header><div style="background-color:#fff3cd;padding:15px;margin-top:-10px;margin-bottom:30px;border-radius:8px;font-weight:bold;text-align:center;">دعمكم للصفحة هذه والاشتراك في القنوات يُسهم في تطويرها. سيتم إضافة رماة الرمح قريباً، وكذلك شرح أضرار فخ الصيد وتحليل الأبطال. اشترك في القنوات!</div>
<div class="container main-container">
<!-- Navigation Tabs -->
<ul class="nav nav-tabs mb-4" id="mainTabs" role="tablist">
<li class="nav-item" role="presentation">
<button aria-controls="infantry" aria-selected="true" class="nav-link active" data-bs-target="#infantry" data-bs-toggle="tab" id="infantry-tab" role="tab" type="button">
<i class="fas fa-shield-alt"></i> وحدات المشاة
                </button>
</li>
<li class="nav-item" role="presentation">
<button aria-controls="archers" aria-selected="false" class="nav-link" data-bs-target="#archers" data-bs-toggle="tab" id="archers-tab" role="tab" type="button">
<i class="fas fa-bullseye"></i> وحدات الرماة
                </button>
</li>
<li class="nav-item" role="presentation">
<button aria-controls="compare" aria-selected="false" class="nav-link" data-bs-target="#compare" data-bs-toggle="tab" id="compare-tab" role="tab" type="button">
<i class="fas fa-balance-scale"></i> المقارنات المختلطة
                </button>
</li>
<li class="nav-item" role="presentation">
<button aria-controls="battle" aria-selected="false" class="nav-link" data-bs-target="#battle" data-bs-toggle="tab" id="battle-tab" role="tab" type="button">
<i class="fas fa-crosshairs"></i> محاكاة المعارك
                </button>
</li>
</ul>
<!-- Tab Content -->
<div class="tab-content" id="mainTabsContent">
<!-- Infantry Units Tab -->
<div aria-labelledby="infantry-tab" class="tab-pane fade show active" id="infantry" role="tabpanel">
<div class="row">
<div class="col-md-6">
<div class="card unit-card helios-card mb-4">
<div class="card-header">
<h3><img alt="هيليوس" class="faction-icon" src="https://i.imgur.com/64yMtsa.png"/> مشاة هيليوس</h3>
</div>
<div class="card-body">
<div class="table-responsive">
<table class="table table-striped stats-table" id="heliosInfantryTable">
<thead>
<tr>
<th>المستوى</th>
<th>هجوم</th>
<th>دفاع</th>
<th>صحة</th>
<th>فتك</th>
<th>إجمالي القوة</th>
</tr>
</thead>
<tbody>
<!-- Will be populated by JavaScript -->
</tbody>
</table>
</div>
<div class="chart-container">
<canvas id="heliosInfantryChart"></canvas>
</div>
</div>
</div>
</div>
<div class="col-md-6">
<div class="card unit-card dominant-card mb-4">
<div class="card-header">
<h3><img alt="المهيمنين" class="faction-icon" src="https://i.imgur.com/4uXqZFV.png"/> المهيمنين</h3>
</div>
<div class="card-body">
<div class="table-responsive">
<table class="table table-striped stats-table" id="dominantInfantryTable">
<thead>
<tr>
<th>المستوى</th>
<th>هجوم</th>
<th>دفاع</th>
<th>صحة</th>
<th>فتك</th>
<th>إجمالي القوة</th>
</tr>
</thead>
<tbody>
<!-- Will be populated by JavaScript -->
</tbody>
</table>
</div>
<div class="chart-container">
<canvas id="dominantInfantryChart"></canvas>
</div>
</div>
</div>
</div>
</div>
<!-- Infantry Comparison -->
<div class="card comparison-card mb-4">
<div class="card-header">
<h3>مقارنة وحدات المشاة</h3>
</div>
<div class="card-body">
<div class="row">
<div class="col-md-6">
<div class="form-group mb-3">
<label for="infantryUnit1">اختر الوحدة الأولى:</label>
<select class="form-select" id="infantryUnit1">
<option value="helios">مشاة هيليوس</option>
<option value="dominant">المهيمنين</option>
</select>
</div>
<div class="form-group mb-3">
<label for="infantryLevel1">مستوى الوحدة الأولى:</label>
<select class="form-select" id="infantryLevel1">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
</div>
</div>
<div class="col-md-6">
<div class="form-group mb-3">
<label for="infantryUnit2">اختر الوحدة الثانية:</label>
<select class="form-select" id="infantryUnit2">
<option value="dominant">المهيمنين</option>
<option value="helios">مشاة هيليوس</option>
</select>
</div>
<div class="form-group mb-3">
<label for="infantryLevel2">مستوى الوحدة الثانية:</label>
<select class="form-select" id="infantryLevel2">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
</div>
</div>
</div>
<button class="btn btn-primary mt-2" id="compareInfantryBtn">قارن</button>
<div class="comparison-results mt-4" id="infantryComparisonResults" style="display: none;">
<h4>نتائج المقارنة</h4>
<div class="table-responsive">
<table class="table table-bordered comparison-table">
<thead>
<tr>
<th>المعيار</th>
<th id="infantryCompare1Header">الوحدة 1</th>
<th id="infantryCompare2Header">الوحدة 2</th>
<th>الفرق</th>
<th>النسبة</th>
</tr>
</thead>
<tbody id="infantryComparisonTable">
<!-- Will be populated by JavaScript -->
</tbody>
</table>
</div>
<div class="chart-container">
<canvas id="infantryComparisonChart"></canvas>
</div>
</div>
</div>
</div>
<!-- Equivalent Level Calculator for Infantry -->
<div class="card calculation-card mb-4">
<div class="card-header">
<h3>حساب المستويات المكافئة للمشاة</h3>
</div>
<div class="card-body">
<div class="row">
<div class="col-md-6">
<div class="form-group mb-3">
<label for="infantryEquivUnit">اختر الوحدة:</label>
<select class="form-select" id="infantryEquivUnit">
<option value="helios">مشاة هيليوس</option>
<option value="dominant">المهيمنين</option>
</select>
</div>
</div>
<div class="col-md-6">
<div class="form-group mb-3">
<label for="infantryEquivLevel">مستوى الوحدة:</label>
<select class="form-select" id="infantryEquivLevel">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
</div>
</div>
</div>
<button class="btn btn-primary mt-2" id="calculateInfantryEquivBtn">حساب</button>
<div class="equiv-results mt-4" id="infantryEquivResults" style="display: none;">
<div class="alert alert-info">
<div id="infantryEquivText"></div>
</div>
</div>
</div>
</div>
</div>
<!-- Archers Units Tab -->
<div aria-labelledby="archers-tab" class="tab-pane fade" id="archers" role="tabpanel">
<div class="row">
<div class="col-md-6">
<div class="card unit-card helios-card mb-4">
<div class="card-header">
<h3><img alt="هيليوس" class="faction-icon" src="https://i.imgur.com/64yMtsa.png"/> رماة هيليوس</h3>
</div>
<div class="card-body">
<div class="table-responsive">
<table class="table table-striped stats-table" id="heliosArchersTable">
<thead>
<tr>
<th>المستوى</th>
<th>هجوم</th>
<th>دفاع</th>
<th>صحة</th>
<th>فتك</th>
<th>إجمالي القوة</th>
</tr>
</thead>
<tbody>
<!-- Will be populated by JavaScript -->
</tbody>
</table>
</div>
<div class="chart-container">
<canvas id="heliosArchersChart"></canvas>
</div>
</div>
</div>
</div>
<div class="col-md-6">
<div class="card unit-card dominant-card mb-4">
<div class="card-header">
<h3><img alt="المهيمنين" class="faction-icon" src="https://i.imgur.com/4uXqZFV.png"/> الرماة المهيمنين</h3>
</div>
<div class="card-body">
<div class="table-responsive">
<table class="table table-striped stats-table" id="dominantArchersTable">
<thead>
<tr>
<th>المستوى</th>
<th>هجوم</th>
<th>دفاع</th>
<th>صحة</th>
<th>فتك</th>
<th>إجمالي القوة</th>
</tr>
</thead>
<tbody>
<!-- Will be populated by JavaScript -->
</tbody>
</table>
</div>
<div class="chart-container">
<canvas id="dominantArchersChart"></canvas>
</div>
</div>
</div>
</div>
</div>
<!-- Archers Comparison -->
<div class="card comparison-card mb-4">
<div class="card-header">
<h3>مقارنة وحدات الرماة</h3>
</div>
<div class="card-body">
<div class="row">
<div class="col-md-6">
<div class="form-group mb-3">
<label for="archersUnit1">اختر الوحدة الأولى:</label>
<select class="form-select" id="archersUnit1">
<option value="helios">رماة هيليوس</option>
<option value="dominant">الرماة المهيمنين</option>
</select>
</div>
<div class="form-group mb-3">
<label for="archersLevel1">مستوى الوحدة الأولى:</label>
<select class="form-select" id="archersLevel1">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
</div>
</div>
<div class="col-md-6">
<div class="form-group mb-3">
<label for="archersUnit2">اختر الوحدة الثانية:</label>
<select class="form-select" id="archersUnit2">
<option value="dominant">الرماة المهيمنين</option>
<option value="helios">رماة هيليوس</option>
</select>
</div>
<div class="form-group mb-3">
<label for="archersLevel2">مستوى الوحدة الثانية:</label>
<select class="form-select" id="archersLevel2">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
</div>
</div>
</div>
<button class="btn btn-primary mt-2" id="compareArchersBtn">قارن</button>
<div class="comparison-results mt-4" id="archersComparisonResults" style="display: none;">
<h4>نتائج المقارنة</h4>
<div class="table-responsive">
<table class="table table-bordered comparison-table">
<thead>
<tr>
<th>المعيار</th>
<th id="archersCompare1Header">الوحدة 1</th>
<th id="archersCompare2Header">الوحدة 2</th>
<th>الفرق</th>
<th>النسبة</th>
</tr>
</thead>
<tbody id="archersComparisonTable">
<!-- Will be populated by JavaScript -->
</tbody>
</table>
</div>
<div class="chart-container">
<canvas id="archersComparisonChart"></canvas>
</div>
</div>
</div>
</div>
<!-- Equivalent Level Calculator for Archers -->
<div class="card calculation-card mb-4">
<div class="card-header">
<h3>حساب المستويات المكافئة للرماة</h3>
</div>
<div class="card-body">
<div class="row">
<div class="col-md-6">
<div class="form-group mb-3">
<label for="archersEquivUnit">اختر الوحدة:</label>
<select class="form-select" id="archersEquivUnit">
<option value="helios">رماة هيليوس</option>
<option value="dominant">الرماة المهيمنين</option>
</select>
</div>
</div>
<div class="col-md-6">
<div class="form-group mb-3">
<label for="archersEquivLevel">مستوى الوحدة:</label>
<select class="form-select" id="archersEquivLevel">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
</div>
</div>
</div>
<button class="btn btn-primary mt-2" id="calculateArchersEquivBtn">حساب</button>
<div class="equiv-results mt-4" id="archersEquivResults" style="display: none;">
<div class="alert alert-info">
<div id="archersEquivText"></div>
</div>
</div>
</div>
</div>
</div>
<!-- Mixed Comparison Tab -->
<div aria-labelledby="compare-tab" class="tab-pane fade" id="compare" role="tabpanel">
<div class="card comparison-card mb-4">
<div class="card-header">
<h3>مقارنة وحدات مختلطة</h3>
</div>
<div class="card-body">
<div class="row">
<div class="col-md-6">
<div class="form-group mb-3">
<label for="mixedUnitType1">نوع الوحدة الأولى:</label>
<select class="form-select" id="mixedUnitType1">
<option value="infantry">مشاة</option>
<option value="archers">رماة</option>
</select>
</div>
<div class="form-group mb-3">
<label for="mixedUnit1">اختر الوحدة الأولى:</label>
<select class="form-select" id="mixedUnit1">
<option value="helios">هيليوس</option>
<option value="dominant">المهيمنين</option>
</select>
</div>
<div class="form-group mb-3">
<label for="mixedLevel1">مستوى الوحدة الأولى:</label>
<select class="form-select" id="mixedLevel1">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
</div>
</div>
<div class="col-md-6">
<div class="form-group mb-3">
<label for="mixedUnitType2">نوع الوحدة الثانية:</label>
<select class="form-select" id="mixedUnitType2">
<option value="archers">رماة</option>
<option value="infantry">مشاة</option>
</select>
</div>
<div class="form-group mb-3">
<label for="mixedUnit2">اختر الوحدة الثانية:</label>
<select class="form-select" id="mixedUnit2">
<option value="dominant">المهيمنين</option>
<option value="helios">هيليوس</option>
</select>
</div>
<div class="form-group mb-3">
<label for="mixedLevel2">مستوى الوحدة الثانية:</label>
<select class="form-select" id="mixedLevel2">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
</div>
</div>
</div>
<button class="btn btn-primary mt-2" id="compareMixedBtn">قارن</button>
<div class="comparison-results mt-4" id="mixedComparisonResults" style="display: none;">
<h4>نتائج المقارنة</h4>
<div class="alert alert-warning">
<i class="fas fa-exclamation-triangle"></i>
                                ملاحظة: المقارنة بين وحدات مختلفة من حيث النوع تعطي مؤشراً تقريبياً فقط
                            </div>
<div class="table-responsive">
<table class="table table-bordered comparison-table">
<thead>
<tr>
<th>المعيار</th>
<th id="mixedCompare1Header">الوحدة 1</th>
<th id="mixedCompare2Header">الوحدة 2</th>
<th>الفرق</th>
<th>النسبة</th>
</tr>
</thead>
<tbody id="mixedComparisonTable">
<!-- Will be populated by JavaScript -->
</tbody>
</table>
</div>
<div class="chart-container">
<canvas id="mixedComparisonChart"></canvas>
</div>
</div>
</div>
</div>
</div>
<!-- Battle Simulation Tab -->
<div aria-labelledby="battle-tab" class="tab-pane fade" id="battle" role="tabpanel">
<div class="alert alert-info text-center mb-4">
<strong>المعايير لاتشمل عتاد الحاكم</strong>
<p>ندعوك للاشتراك في قناتنا لدعم المشروع!</p>
</div>
<div class="card battle-card mb-4">
<div class="card-header">
<h3>محاكاة المعارك</h3>
</div>
<div class="card-body">
<div class="row">
<div class="col-md-6">
<div class="card bg-danger-subtle mb-4">
<div class="card-header helios-header">
<h4>قوات هيليوس</h4>
</div>
<div class="card-body">
<div class="row">
<div class="col-md-6">
<div class="infantry-units">
<h5>المشاة</h5>
<div class="form-group mb-3">
<label for="heliosInfantryLevel">مستوى المشاة:</label>
<select class="form-select" id="heliosInfantryLevel">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
</div>
<div class="form-group mb-3">
<label for="heliosInfantryCount">عدد وحدات المشاة:</label>
<input class="form-control" id="heliosInfantryCount" min="0" type="number" value="100"/>
</div>
</div>
</div>
<div class="col-md-6">
<div class="archers-units">
<h5>الرماة</h5>
<div class="form-group mb-3">
<label for="heliosArchersLevel">مستوى الرماة:</label>
<select class="form-select" id="heliosArchersLevel">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
</div>
<div class="form-group mb-3">
<label for="heliosArchersCount">عدد وحدات الرماة:</label>
<input class="form-control" id="heliosArchersCount" min="0" type="number" value="50"/>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-6">
<div class="card bg-warning-subtle mb-4">
<div class="card-header dominant-header">
<h4>قوات المهيمنين</h4>
</div>
<div class="card-body">
<div class="row">
<div class="col-md-6">
<div class="infantry-units">
<h5>المشاة</h5>
<div class="form-group mb-3">
<label for="dominantInfantryLevel">مستوى المشاة:</label>
<select class="form-select" id="dominantInfantryLevel">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
</div>
<div class="form-group mb-3">
<label for="dominantInfantryCount">عدد وحدات المشاة:</label>
<input class="form-control" id="dominantInfantryCount" min="0" type="number" value="100"/>
</div>
</div>
</div>
<div class="col-md-6">
<div class="archers-units">
<h5>الرماة</h5>
<div class="form-group mb-3">
<label for="dominantArchersLevel">مستوى الرماة:</label>
<select class="form-select" id="dominantArchersLevel">
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
</select>
</div>
<div class="form-group mb-3">
<label for="dominantArchersCount">عدد وحدات الرماة:</label>
<input class="form-control" id="dominantArchersCount" min="0" type="number" value="50"/>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

<div class="form-group mt-3 mb-3 text-center">
  <label><strong>حدد المهاجم في هذه المحاكاة:</strong></label><br>
  <div class="btn-group" role="group" aria-label="Attacker Selection">
    <input type="radio" class="btn-check" name="attacker" id="attackerHelios" value="helios" autocomplete="off" checked>
    <label class="btn btn-outline-danger" for="attackerHelios">هيليوس</label>

    <input type="radio" class="btn-check" name="attacker" id="attackerDominant" value="dominant" autocomplete="off">
    <label class="btn btn-outline-warning" for="attackerDominant">المهيمنين</label>
  </div>
</div>

<button class="btn btn-danger mt-2" id="simulateBattleBtn">محاكاة المعركة</button>
<div class="battle-results mt-4" id="battleResults" style="display: none;">
<h4 class="text-center">نتائج المعركة</h4>
<div class="card mb-4">
<div class="card-body">
<div class="row">
<div class="col-md-6">
<div class="battle-stats helios-battle">
<h5>قوات هيليوس</h5>
<div id="heliosBattleStats"></div>
</div>
</div>
<div class="col-md-6">
<div class="battle-stats dominant-battle">
<h5>قوات المهيمنين</h5>
<div id="dominantBattleStats"></div>
</div>
</div>
</div>
</div>
</div>
<div class="row">
<div class="col-md-8 offset-md-2">
<div class="card conclusion-card">
<div class="card-header text-center">
<h5>نتيجة المعركة</h5>
</div>
<div class="card-body">
<div class="battle-conclusion text-center" id="battleConclusion"></div>
<div class="chart-container">
<canvas id="battleResultChart"></canvas>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- Footer -->
<footer class="footer mt-5">
<div class="container">
<div class="row">
<div class="col-md-6">
<h4>Whiteout Survival</h4>
<p>أداة مقارنة الوحدات العسكرية في لعبة Whiteout Survival</p>
</div>
<div class="col-md-6 text-md-end">
<div class="social-links">
<a class="social-link" href="https://youtube.com/@whiteoutsurvivel" target="_blank">
<i class="fab fa-youtube"></i> YouTube
                        </a>
<a class="social-link" href="https://t.me/Whiteoutsurvivel" target="_blank">
<i class="fab fa-telegram"></i> Telegram
                        </a>
<a class="social-link" href="https://discord.gg/yEKvcA5eBq" target="_blank">
<i class="fab fa-discord"></i> Discord
                        </a>
</div>
</div>
</div>
<div class="row mt-3">
<div class="col-12 text-center">
<p class="copyright">حقوق وتصميم <a href="https://t.me/fulldesigne" target="_blank">https://t.me/fulldesigne</a></p>
</div>
</div>
</div>
</footer>
<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
        /**
         * Data Parser Module
         * 
         * This module handles loading and processing unit data
         */

        const DataParser = (() => {
            // Store for unit data
            let unitData = {
                infantry: {
                    helios: {
                        name: "مشاة هيليوس",
                        type: "infantry",
                        stats: [
                            { level: 1, attack: 13, defense: 16, health: 18, lethality: 12 },
                            { level: 2, attack: 14, defense: 17, health: 19, lethality: 13 },
                            { level: 3, attack: 15, defense: 18, health: 20, lethality: 14 },
                            { level: 4, attack: 15, defense: 19, health: 21, lethality: 15 },
                            { level: 5, attack: 16, defense: 22, health: 22, lethality: 15 },
                            { level: 6, attack: 17, defense: 23, health: 23, lethality: 16 },
                            { level: 7, attack: 17, defense: 24, health: 24, lethality: 16 },
                            { level: 8, attack: 18, defense: 25, health: 25, lethality: 17 },
                            { level: 9, attack: 18, defense: 27, health: 26, lethality: 17 },
                            { level: 10, attack: 19, defense: 28, health: 27, lethality: 18 }
                        ]
                    },
                    dominant: {
                        name: "المهيمنين",
                        type: "infantry",
                        stats: [
                            { level: 1, attack: 11, defense: 14, health: 16, lethality: 10 },
                            { level: 2, attack: 12, defense: 16, health: 17, lethality: 11 },
                            { level: 3, attack: 13, defense: 17, health: 18, lethality: 12 },
                            { level: 4, attack: 13, defense: 18, health: 19, lethality: 13 },
                            { level: 5, attack: 14, defense: 20, health: 20, lethality: 13 },
                            { level: 6, attack: 14, defense: 21, health: 21, lethality: 13 },
                            { level: 7, attack: 15, defense: 22, health: 22, lethality: 14 },
                            { level: 8, attack: 15, defense: 23, health: 23, lethality: 15 },
                            { level: 9, attack: 16, defense: 25, health: 24, lethality: 15 },
                            { level: 10, attack: 18, defense: 26, health: 25, lethality: 16 }
                        ]
                    }
                },
                archers: {
                    helios: {
                        name: "رماة هيليوس",
                        type: "archers",
                        stats: [
                            { level: 1, attack: 17, defense: 13, health: 13, lethality: 18 },
                            { level: 2, attack: 19, defense: 14, health: 14, lethality: 19 },
                            { level: 3, attack: 20, defense: 15, health: 15, lethality: 20 },
                            { level: 4, attack: 21, defense: 16, health: 15, lethality: 21 },
                            { level: 5, attack: 23, defense: 16, health: 16, lethality: 22 },
                            { level: 6, attack: 24, defense: 17, health: 16, lethality: 23 },
                            { level: 7, attack: 25, defense: 18, health: 17, lethality: 24 },
                            { level: 8, attack: 26, defense: 19, health: 18, lethality: 25 },
                            { level: 9, attack: 28, defense: 19, health: 18, lethality: 26 },
                            { level: 10, attack: 30, defense: 21, health: 20, lethality: 27 }
                        ]
                    },
                    dominant: {
                        name: "الرماة المهيمنين",
                        type: "archers",
                        stats: [
                            { level: 1, attack: 15, defense: 11, health: 11, lethality: 16 },
                            { level: 2, attack: 17, defense: 12, health: 12, lethality: 17 },
                            { level: 3, attack: 18, defense: 13, health: 13, lethality: 18 },
                            { level: 4, attack: 19, defense: 14, health: 13, lethality: 19 },
                            { level: 5, attack: 21, defense: 14, health: 14, lethality: 20 },
                            { level: 6, attack: 22, defense: 15, health: 14, lethality: 21 },
                            { level: 7, attack: 23, defense: 15, health: 15, lethality: 22 },
                            { level: 8, attack: 24, defense: 16, health: 15, lethality: 23 },
                            { level: 9, attack: 26, defense: 17, health: 16, lethality: 24 },
                            { level: 10, attack: 27, defense: 19, health: 17, lethality: 25 }
                        ]
                    }
                }
            };

            // Calculate total power for a unit
            const calculateTotalPower = (stats) => {
                return stats.attack + stats.defense + stats.health + stats.lethality;
            };

            // Get power data for all levels of a unit
            const getPowerProgression = (unit) => {
                return unit.stats.map(level => ({
                    level: level.level,
                    power: calculateTotalPower(level)
                }));
            };

            // Get data for specific level
            const getUnitDataByLevel = (unitType, faction, level) => {
                if (!unitData[unitType] || !unitData[unitType][faction]) {
                    console.error(`Data not available for ${unitType} ${faction}`);
                    return null;
                }
                
                const stats = unitData[unitType][faction].stats.find(s => s.level === parseInt(level));
                if (!stats) {
                    console.error(`Level ${level} data not available for ${unitType} ${faction}`);
                    return null;
                }
                
                return {
                    ...stats,
                    totalPower: calculateTotalPower(stats)
                };
            };

            // Convert object to displayable rows for tables
            const unitDataToTableRows = (data) => {
                return data.stats.map(s => {
                    const totalPower = calculateTotalPower(s);
                    return [s.level, s.attack, s.defense, s.health, s.lethality, totalPower];
                });
            };

            // Compare two units and return the difference
            const compareUnits = (unit1Data, unit2Data) => {
                const result = {};
                
                // Basic stats comparison
                for (const stat of ['attack', 'defense', 'health', 'lethality']) {
                    const diff = unit1Data[stat] - unit2Data[stat];
                    const percentage = ((diff / unit2Data[stat]) * 100).toFixed(1);
                    
                    result[stat] = {
                        unit1: unit1Data[stat],
                        unit2: unit2Data[stat],
                        difference: diff,
                        percentage: percentage
                    };
                }
                
                // Total power comparison
                const power1 = calculateTotalPower(unit1Data);
                const power2 = calculateTotalPower(unit2Data);
                const powerDiff = power1 - power2;
                const powerPercentage = ((powerDiff / power2) * 100).toFixed(1);
                
                result.totalPower = {
                    unit1: power1,
                    unit2: power2,
                    difference: powerDiff,
                    percentage: powerPercentage
                };
                
                return result;
            };

            // Find equivalent level of a unit compared to another
            const findEquivalentLevel = (srcUnitType, srcFaction, srcLevel, targetUnitType, targetFaction) => {
                const sourceUnit = getUnitDataByLevel(srcUnitType, srcFaction, srcLevel);
                if (!sourceUnit) return null;
                
                const sourcePower = calculateTotalPower(sourceUnit);
                const targetUnits = unitData[targetUnitType][targetFaction].stats;
                
                let closestLevel = null;
                let smallestDiff = Infinity;
                
                for (const unit of targetUnits) {
                    const power = calculateTotalPower(unit);
                    const diff = Math.abs(power - sourcePower);
                    
                    if (diff < smallestDiff) {
                        smallestDiff = diff;
                        closestLevel = unit.level;
                    }
                }
                
                return {
                    level: closestLevel,
                    difference: smallestDiff
                };
            };

            // Public API
            return {
                getUnitDataByLevel,
                calculateTotalPower,
                getPowerProgression,
                unitDataToTableRows,
                compareUnits,
                findEquivalentLevel,
                getData: () => unitData
            };
        })();
        
        /**
         * Charts Configuration Module
         * 
         * This module handles chart creation and configuration using Chart.js
         */

        const ChartConfig = (() => {
            // Chart instances
            const charts = {};
            
            // Colors configuration
            const colors = {
                helios: {
                    primary: 'rgb(217, 83, 79)',
                    background: 'rgba(217, 83, 79, 0.2)',
                    border: 'rgb(217, 83, 79)'
                },
                dominant: {
                    primary: 'rgb(240, 173, 78)',
                    background: 'rgba(240, 173, 78, 0.2)',
                    border: 'rgb(240, 173, 78)'
                }
            };

            // Translation map for chart labels
            const translations = {
                attack: "هجوم",
                defense: "دفاع",
                health: "صحة",
                lethality: "فتك",
                totalPower: "إجمالي القوة"
            };
            
            // Create a line chart for power progression
            const createPowerProgressionChart = (canvasId, data, faction) => {
                const ctx = document.getElementById(canvasId).getContext('2d');
                
                // Clear any existing chart
                if (charts[canvasId]) {
                    charts[canvasId].destroy();
                }
                
                // Create new chart
                charts[canvasId] = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: data.map(item => item.level),
                        datasets: [{
                            label: 'إجمالي القوة',
                            data: data.map(item => item.power),
                            backgroundColor: colors[faction].background,
                            borderColor: colors[faction].border,
                            borderWidth: 2,
                            tension: 0.3,
                            pointBackgroundColor: colors[faction].primary,
                            pointRadius: 5,
                            pointHoverRadius: 7
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'تطور القوة حسب المستويات',
                                font: {
                                    size: 16,
                                    family: "'Cairo', sans-serif"
                                },
                                padding: {
                                    top: 10,
                                    bottom: 20
                                }
                            },
                            legend: {
                                position: 'top',
                                labels: {
                                    font: {
                                        size: 14,
                                        family: "'Cairo', sans-serif"
                                    }
                                }
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `القوة: ${context.parsed.y}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                                ticks: {
                                    font: {
                                        family: "'Cairo', sans-serif"
                                    }
                                }
                            },
                            x: {
                                title: {
                                    display: true,
                                    text: 'المستوى',
                                    font: {
                                        size: 14,
                                        family: "'Cairo', sans-serif"
                                    }
                                },
                                ticks: {
                                    font: {
                                        family: "'Cairo', sans-serif"
                                    }
                                }
                            }
                        }
                    }
                });
                
                return charts[canvasId];
            };
            
            // Create a comparison radar chart
            const createComparisonRadarChart = (canvasId, unit1, unit2, unit1Name, unit2Name, unit1Faction, unit2Faction) => {
                const ctx = document.getElementById(canvasId).getContext('2d');
                
                // Prepare data for radar chart
                const labels = ['هجوم', 'دفاع', 'صحة', 'فتك'];
                const unit1Data = [unit1.attack, unit1.defense, unit1.health, unit1.lethality];
                const unit2Data = [unit2.attack, unit2.defense, unit2.health, unit2.lethality];
                
                // Clear any existing chart
                if (charts[canvasId]) {
                    charts[canvasId].destroy();
                }
                
                // Create new chart
                charts[canvasId] = new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: labels,
                        datasets: [
                            {
                                label: unit1Name,
                                data: unit1Data,
                                backgroundColor: colors[unit1Faction].background,
                                borderColor: colors[unit1Faction].border,
                                borderWidth: 2,
                                pointBackgroundColor: colors[unit1Faction].primary
                            },
                            {
                                label: unit2Name,
                                data: unit2Data,
                                backgroundColor: colors[unit2Faction].background,
                                borderColor: colors[unit2Faction].border,
                                borderWidth: 2,
                                pointBackgroundColor: colors[unit2Faction].primary
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'مقارنة الإحصائيات',
                                font: {
                                    size: 16,
                                    family: "'Cairo', sans-serif"
                                },
                                padding: {
                                    top: 10,
                                    bottom: 20
                                }
                            },
                            legend: {
                                position: 'top',
                                labels: {
                                    font: {
                                        size: 14,
                                        family: "'Cairo', sans-serif"
                                    }
                                }
                            }
                        },
                        scales: {
                            r: {
                                angleLines: {
                                    display: true
                                },
                                ticks: {
                                    backdropColor: 'rgba(255, 255, 255, 0.7)',
                                    font: {
                                        family: "'Cairo', sans-serif"
                                    }
                                },
                                pointLabels: {
                                    font: {
                                        size: 14,
                                        family: "'Cairo', sans-serif"
                                    }
                                }
                            }
                        }
                    }
                });
                
                return charts[canvasId];
            };
            
            // Create a battle result chart
            const createBattleResultChart = (canvasId, heliosData, dominantData) => {
                const ctx = document.getElementById(canvasId).getContext('2d');
                
                // Prepare data for battle chart
                const heliosPower = heliosData.infantry.totalPower * heliosData.infantry.count + 
                                   heliosData.archers.totalPower * heliosData.archers.count;
                
                const dominantPower = dominantData.infantry.totalPower * dominantData.infantry.count + 
                                     dominantData.archers.totalPower * dominantData.archers.count;
                
                // Clear any existing chart
                if (charts[canvasId]) {
                    charts[canvasId].destroy();
                }
                
                // Create new chart
                charts[canvasId] = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['هيليوس', 'المهيمنين'],
                        datasets: [{
                            label: 'إجمالي القوة',
                            data: [heliosPower, dominantPower],
                            backgroundColor: [
                                colors.helios.background,
                                colors.dominant.background
                            ],
                            borderColor: [
                                colors.helios.border,
                                colors.dominant.border
                            ],
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            title: {
                                display: true,
                                text: 'مقارنة القوة العسكرية',
                                font: {
                                    size: 16,
                                    family: "'Cairo', sans-serif"
                                },
                                padding: {
                                    top: 10,
                                    bottom: 20
                                }
                            },
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        return `القوة: ${context.parsed.y}`;
                                    }
                                }
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: true,
                                title: {
                                    display: true,
                                    text: 'إجمالي القوة',
                                    font: {
                                        size: 14,
                                        family: "'Cairo', sans-serif"
                                    }
                                },
                                ticks: {
                                    font: {
                                        family: "'Cairo', sans-serif"
                                    }
                                }
                            },
                            x: {
                                ticks: {
                                    font: {
                                        size: 14,
                                        family: "'Cairo', sans-serif"
                                    }
                                }
                            }
                        }
                    }
                });
                
                return charts[canvasId];
            };
            
            // Public API
            return {
                createPowerProgressionChart,
                createComparisonRadarChart,
                createBattleResultChart,
                colors,
                translations
            };
        })();

        /**
         * Unit Comparison Module
         * 
         * This module handles comparison between different units
         */

        const UnitComparison = (() => {
            // Generate a comparison table
            const generateComparisonTable = (comparisonData, tableBodyId) => {
                const tbody = document.getElementById(tableBodyId);
                if (!tbody) {
                    console.error(`Table body with id ${tableBodyId} not found`);
                    return;
                }
                
                // Clear previous table data
                tbody.innerHTML = '';
                
                // Add rows for each stat
                const stats = [
                    { key: 'attack', label: 'هجوم' },
                    { key: 'defense', label: 'دفاع' },
                    { key: 'health', label: 'صحة' },
                    { key: 'lethality', label: 'فتك' },
                    { key: 'totalPower', label: 'إجمالي القوة' }
                ];
                
                stats.forEach(stat => {
                    const row = document.createElement('tr');
                    const statData = comparisonData[stat.key];
                    
                    // Create table cells
                    const labelCell = document.createElement('td');
                    labelCell.textContent = stat.label;
                    
                    const unit1Cell = document.createElement('td');
                    unit1Cell.textContent = statData.unit1;
                    
                    const unit2Cell = document.createElement('td');
                    unit2Cell.textContent = statData.unit2;
                    
                    const diffCell = document.createElement('td');
                    const diffValue = statData.difference;
                    diffCell.textContent = diffValue > 0 ? `+${diffValue}` : diffValue;
                    diffCell.className = diffValue > 0 ? 'text-success' : (diffValue < 0 ? 'text-danger' : '');
                    
                    const percentCell = document.createElement('td');
                    const percentValue = statData.percentage;
                    percentCell.textContent = percentValue > 0 ? `+${percentValue}%` : `${percentValue}%`;
                    percentCell.className = percentValue > 0 ? 'text-success' : (percentValue < 0 ? 'text-danger' : '');
                    
                    // Append cells to row
                    row.appendChild(labelCell);
                    row.appendChild(unit1Cell);
                    row.appendChild(unit2Cell);
                    row.appendChild(diffCell);
                    row.appendChild(percentCell);
                    
                    // Append row to table body
                    tbody.appendChild(row);
                });
            };
            
            // Compare two units and display the result
            const compareUnits = (unitType1, faction1, level1, unitType2, faction2, level2, resultContainerId, tableId, chartId, headerUnit1Id, headerUnit2Id) => {
                // Get unit data
                const unit1Data = DataParser.getUnitDataByLevel(unitType1, faction1, level1);
                const unit2Data = DataParser.getUnitDataByLevel(unitType2, faction2, level2);
                
                if (!unit1Data || !unit2Data) {
                    console.error('Error: Could not get unit data for comparison');
                    return false;
                }
                
                // Get faction-specific names
                const unitNames = {
                    infantry: {
                        helios: 'مشاة هيليوس',
                        dominant: 'المهيمنين'
                    },
                    archers: {
                        helios: 'رماة هيليوس',
                        dominant: 'الرماة المهيمنين'
                    }
                };
                
                const unit1Name = `${unitNames[unitType1][faction1]} (${level1})`;
                const unit2Name = `${unitNames[unitType2][faction2]} (${level2})`;
                
                // Update header text
                if (headerUnit1Id && headerUnit2Id) {
                    document.getElementById(headerUnit1Id).textContent = unit1Name;
                    document.getElementById(headerUnit2Id).textContent = unit2Name;
                }
                
                // Generate comparison data
                const comparisonData = DataParser.compareUnits(unit1Data, unit2Data);
                
                // Generate comparison table
                generateComparisonTable(comparisonData, tableId);
                
                // Create radar chart
                ChartConfig.createComparisonRadarChart(chartId, unit1Data, unit2Data, unit1Name, unit2Name, faction1, faction2);
                
                // Show results container
                document.getElementById(resultContainerId).style.display = 'block';
                
                return true;
            };
            
            // Calculate equivalent level between two different units
            const findEquivalentLevel = (unitType, faction, level, targetUnitType, targetFaction, resultContainerId, resultTextId) => {
                // Find equivalent level
                const equivalentLevel = DataParser.findEquivalentLevel(unitType, faction, level, targetUnitType, targetFaction);
                
                if (!equivalentLevel) {
                    console.error('Error: Could not determine equivalent level');
                    return false;
                }
                
                // Get faction-specific names
                const unitNames = {
                    infantry: {
                        helios: 'مشاة هيليوس',
                        dominant: 'المهيمنين'
                    },
                    archers: {
                        helios: 'رماة هيليوس',
                        dominant: 'الرماة المهيمنين'
                    }
                };
                
                const sourceUnitName = unitNames[unitType][faction];
                const targetUnitName = unitNames[targetUnitType][targetFaction];
                
                // Create result text
                const resultText = `
                    ${sourceUnitName} من المستوى ${level} تعادل تقريباً ${targetUnitName} من المستوى ${equivalentLevel.level}.
                `;
                
                // Update result container
                document.getElementById(resultTextId).innerHTML = resultText;
                document.getElementById(resultContainerId).style.display = 'block';
                
                return true;
            };
            
            // Public API
            return {
                compareUnits,
                findEquivalentLevel,
                generateComparisonTable
            };
        })();

        /**
         * Battle Simulator Module
         * 
         * This module simulates battles between different unit types and factions
         */

        const BattleSimulator = (() => {
            // Types of advantages
            const ADVANTAGE_TYPES = {
                NONE: 'none',
                ATTACK: 'attack',
                DEFENSE: 'defense',
                HEALTH: 'health',
                LETHALITY: 'lethality',
                COUNT: 'count'
            };
            
            // Calculate battle statistics for a side
            const calculateBattleStats = (infantryData, infantryCount, archersData, archersCount) => {
                const infantryPower = infantryData ? DataParser.calculateTotalPower(infantryData) * infantryCount : 0;
                const archersPower = archersData ? DataParser.calculateTotalPower(archersData) * archersCount : 0;
                
                return {
                    infantry: {
                        ...infantryData,
                        count: infantryCount,
                        totalPower: infantryPower
                    },
                    archers: {
                        ...archersData,
                        count: archersCount,
                        totalPower: archersPower
                    },
                    totalPower: infantryPower + archersPower,
                    totalUnits: infantryCount + archersCount
                };
            };
            
            // Determine the main advantage of the winner
            const determineAdvantage = (winner, loser) => {
                // Initial point assignment for each advantage type
                let advantages = {
                    [ADVANTAGE_TYPES.ATTACK]: 0,
                    [ADVANTAGE_TYPES.DEFENSE]: 0,
                    [ADVANTAGE_TYPES.HEALTH]: 0,
                    [ADVANTAGE_TYPES.LETHALITY]: 0,
                    [ADVANTAGE_TYPES.COUNT]: 0
                };
                
                // Compare infantry stats
                if (winner.infantry && loser.infantry) {
                    const winnerInf = winner.infantry;
                    const loserInf = loser.infantry;
                    
                    // Calculate percentage differences
                    const attackDiff = (winnerInf.attack / loserInf.attack) - 1;
                    const defenseDiff = (winnerInf.defense / loserInf.defense) - 1;
                    const healthDiff = (winnerInf.health / loserInf.health) - 1;
                    const lethalityDiff = (winnerInf.lethality / loserInf.lethality) - 1;
                    
                    // Assign points based on difference magnitude
                    advantages[ADVANTAGE_TYPES.ATTACK] += attackDiff * 10;
                    advantages[ADVANTAGE_TYPES.DEFENSE] += defenseDiff * 10;
                    advantages[ADVANTAGE_TYPES.HEALTH] += healthDiff * 10;
                    advantages[ADVANTAGE_TYPES.LETHALITY] += lethalityDiff * 10;
                }
                
                // Compare archers stats
                if (winner.archers && loser.archers) {
                    const winnerArc = winner.archers;
                    const loserArc = loser.archers;
                    
                    // Calculate percentage differences
                    const attackDiff = (winnerArc.attack / loserArc.attack) - 1;
                    const defenseDiff = (winnerArc.defense / loserArc.defense) - 1;
                    const healthDiff = (winnerArc.health / loserArc.health) - 1;
                    const lethalityDiff = (winnerArc.lethality / loserArc.lethality) - 1;
                    
                    // Assign points based on difference magnitude
                    advantages[ADVANTAGE_TYPES.ATTACK] += attackDiff * 10;
                    advantages[ADVANTAGE_TYPES.DEFENSE] += defenseDiff * 10;
                    advantages[ADVANTAGE_TYPES.HEALTH] += healthDiff * 10;
                    advantages[ADVANTAGE_TYPES.LETHALITY] += lethalityDiff * 10;
                }
                
                // Check unit count advantage
                const countDiff = (winner.totalUnits / loser.totalUnits) - 1;
                advantages[ADVANTAGE_TYPES.COUNT] = countDiff * 15; // More weight for unit count
                
                // Find the most significant advantage
                let maxAdvantage = ADVANTAGE_TYPES.NONE;
                let maxValue = 0;
                
                for (const [type, value] of Object.entries(advantages)) {
                    if (value > maxValue) {
                        maxAdvantage = type;
                        maxValue = value;
                    }
                }
                
                return maxAdvantage;
            };
            
            // Generate a battle summary text
            const generateBattleSummary = (heliosStats, dominantStats) => {
                // Determine winner
                const heliosPower = heliosStats.totalPower;
                const dominantPower = dominantStats.totalPower;
                
                let winner, loser, winnerName, loserName;
                
                if (heliosPower > dominantPower) {
                    winner = heliosStats;
                    loser = dominantStats;
                    winnerName = 'هيليوس';
                    loserName = 'المهيمنين';
                } else {
                    winner = dominantStats;
                    loser = heliosStats;
                    winnerName = 'المهيمنين';
                    loserName = 'هيليوس';
                }
                
                // Calculate power difference
                const powerDiff = winner.totalPower - loser.totalPower;
                const powerPercentage = ((powerDiff / loser.totalPower) * 100).toFixed(1);
                
                // Determine main advantage
                const mainAdvantage = determineAdvantage(winner, loser);
                
                // Generate advantage text
                let advantageText = '';
                switch (mainAdvantage) {
                    case ADVANTAGE_TYPES.ATTACK:
                        advantageText = 'التفوق في قوة الهجوم';
                        break;
                    case ADVANTAGE_TYPES.DEFENSE:
                        advantageText = 'التفوق في قوة الدفاع';
                        break;
                    case ADVANTAGE_TYPES.HEALTH:
                        advantageText = 'التفوق في نقاط الصحة';
                        break;
                    case ADVANTAGE_TYPES.LETHALITY:
                        advantageText = 'التفوق في معدل الفتك';
                        break;
                    case ADVANTAGE_TYPES.COUNT:
                        advantageText = 'التفوق في عدد الوحدات';
                        break;
                    default:
                        advantageText = 'توازن القوة بشكل عام';
                }
                
                // Generate the summary text
                let summaryText = '';
                
                if (powerPercentage < 5) {
                    summaryText = `معركة متقاربة جداً! ${winnerName} يفوز بفارق ضئيل قدره ${powerPercentage}% من القوة الإجمالية.`;
                } else if (powerPercentage < 15) {
                    summaryText = `فوز لقوات ${winnerName} بفارق معقول قدره ${powerPercentage}% من القوة الإجمالية. سبب الفوز: ${advantageText}.`;
                } else if (powerPercentage < 30) {
                    summaryText = `فوز واضح لقوات ${winnerName} بفارق ${powerPercentage}% من القوة الإجمالية. سبب الفوز الرئيسي: ${advantageText}.`;
                } else {
                    summaryText = `فوز ساحق لقوات ${winnerName} بفارق كبير قدره ${powerPercentage}% من القوة الإجمالية. سبب الانتصار: ${advantageText}.`;
                }
                
                return {
                    summary: summaryText,
                    winner: winnerName,
                    loser: loserName,
                    powerDiff: powerDiff,
                    powerPercentage: powerPercentage,
                    advantage: advantageText
                };
            };
            
            // Display battle statistics
            const displayBattleStats = (container, stats) => {
                let html = `
                    <p><strong>إجمالي القوة:</strong> ${stats.totalPower}</p>
                    <p><strong>عدد الوحدات:</strong> ${stats.totalUnits}</p>
                    <hr>
                `;
                
                if (stats.infantry.count > 0) {
                    html += `
                        <p><strong>المشاة (مستوى ${stats.infantry.level}):</strong></p>
                        <ul>
                            <li>العدد: ${stats.infantry.count}</li>
                            <li>القوة: ${stats.infantry.totalPower}</li>
                            <li>الهجوم: ${stats.infantry.attack}</li>
                            <li>الدفاع: ${stats.infantry.defense}</li>
                            <li>الصحة: ${stats.infantry.health}</li>
                            <li>الفتك: ${stats.infantry.lethality}</li>
                        </ul>
                    `;
                }
                
                if (stats.archers.count > 0) {
                    html += `
                        <p><strong>الرماة (مستوى ${stats.archers.level}):</strong></p>
                        <ul>
                            <li>العدد: ${stats.archers.count}</li>
                            <li>القوة: ${stats.archers.totalPower}</li>
                            <li>الهجوم: ${stats.archers.attack}</li>
                            <li>الدفاع: ${stats.archers.defense}</li>
                            <li>الصحة: ${stats.archers.health}</li>
                            <li>الفتك: ${stats.archers.lethality}</li>
                        </ul>
                    `;
                }
                
                container.innerHTML = html;
            };
            
            // Simulate battle between the two factions
            const simulateBattle = (heliosInfLevel, heliosInfCount, heliosArcLevel, heliosArcCount,
                                 dominantInfLevel, dominantInfCount, dominantArcLevel, dominantArcCount) => {
                // Get unit data
                const heliosInfantry = heliosInfCount > 0 ? 
                    DataParser.getUnitDataByLevel('infantry', 'helios', heliosInfLevel) : null;
                
                const heliosArchers = heliosArcCount > 0 ? 
                    DataParser.getUnitDataByLevel('archers', 'helios', heliosArcLevel) : null;
                
                const dominantInfantry = dominantInfCount > 0 ? 
                    DataParser.getUnitDataByLevel('infantry', 'dominant', dominantInfLevel) : null;
                
                const dominantArchers = dominantArcCount > 0 ? 
                    DataParser.getUnitDataByLevel('archers', 'dominant', dominantArcLevel) : null;
                
                // Calculate battle stats
                const heliosStats = calculateBattleStats(
                    heliosInfantry, heliosInfCount, 
                    heliosArchers, heliosArcCount
                );
                
                const dominantStats = calculateBattleStats(
                    dominantInfantry, dominantInfCount, 
                    dominantArchers, dominantArcCount
                );
                
                // Generate battle summary
                const battleSummary = generateBattleSummary(heliosStats, dominantStats);
                
                return {
                    heliosStats,
                    dominantStats,
                    battleSummary
                };
            };
            
            // Public API
            return {
                simulateBattle,
                displayBattleStats
            };
        })();

        /**
         * Main JavaScript file
         * 
         * This file initializes the application and sets up event handlers
         */

        // Initialize the application when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Unit data loaded successfully');
            initializeApp();
            
            // Initialize the application
            function initializeApp() {
                // Populate tables with unit data
                populateUnitTables();
                
                // Create power progression charts
                createInitialCharts();
                
                // Set up event listeners
                setupEventListeners();
            }
            
            // Populate tables with unit statistics
            function populateUnitTables() {
                const unitData = DataParser.getData();
                
                // Populate infantry tables
                populateTableWithData('heliosInfantryTable', unitData.infantry.helios);
                populateTableWithData('dominantInfantryTable', unitData.infantry.dominant);
                
                // Populate archers tables
                populateTableWithData('heliosArchersTable', unitData.archers.helios);
                populateTableWithData('dominantArchersTable', unitData.archers.dominant);
            }
            
            // Populate a table with unit data
            function populateTableWithData(tableId, unitData) {
                const tableBody = document.getElementById(tableId).querySelector('tbody');
                if (!tableBody) return;
                
                // Clear table
                tableBody.innerHTML = '';
                
                // Add rows
                const rows = DataParser.unitDataToTableRows(unitData);
                rows.forEach(rowData => {
                    const row = document.createElement('tr');
                    
                    rowData.forEach(cellData => {
                        const cell = document.createElement('td');
                        cell.textContent = cellData;
                        row.appendChild(cell);
                    });
                    
                    tableBody.appendChild(row);
                });
            }
            
            // Create initial power progression charts
            function createInitialCharts() {
                const unitData = DataParser.getData();
                
                // Create infantry charts
                const heliosInfPower = DataParser.getPowerProgression(unitData.infantry.helios);
                const dominantInfPower = DataParser.getPowerProgression(unitData.infantry.dominant);
                
                ChartConfig.createPowerProgressionChart('heliosInfantryChart', heliosInfPower, 'helios');
                ChartConfig.createPowerProgressionChart('dominantInfantryChart', dominantInfPower, 'dominant');
                
                // Create archers charts
                const heliosArcPower = DataParser.getPowerProgression(unitData.archers.helios);
                const dominantArcPower = DataParser.getPowerProgression(unitData.archers.dominant);
                
                ChartConfig.createPowerProgressionChart('heliosArchersChart', heliosArcPower, 'helios');
                ChartConfig.createPowerProgressionChart('dominantArchersChart', dominantArcPower, 'dominant');
            }
            
            // Set up event listeners for all interactive elements
            function setupEventListeners() {
                // Infantry comparison
                document.getElementById('compareInfantryBtn').addEventListener('click', function() {
                    const unit1 = document.getElementById('infantryUnit1').value;
                    const level1 = document.getElementById('infantryLevel1').value;
                    const unit2 = document.getElementById('infantryUnit2').value;
                    const level2 = document.getElementById('infantryLevel2').value;
                    
                    UnitComparison.compareUnits(
                        'infantry', unit1, level1, 
                        'infantry', unit2, level2, 
                        'infantryComparisonResults', 
                        'infantryComparisonTable', 
                        'infantryComparisonChart',
                        'infantryCompare1Header',
                        'infantryCompare2Header'
                    );
                });
                
                // Archers comparison
                document.getElementById('compareArchersBtn').addEventListener('click', function() {
                    const unit1 = document.getElementById('archersUnit1').value;
                    const level1 = document.getElementById('archersLevel1').value;
                    const unit2 = document.getElementById('archersUnit2').value;
                    const level2 = document.getElementById('archersLevel2').value;
                    
                    UnitComparison.compareUnits(
                        'archers', unit1, level1, 
                        'archers', unit2, level2, 
                        'archersComparisonResults', 
                        'archersComparisonTable', 
                        'archersComparisonChart',
                        'archersCompare1Header',
                        'archersCompare2Header'
                    );
                });
                
                // Mixed comparison
                document.getElementById('compareMixedBtn').addEventListener('click', function() {
                    const unitType1 = document.getElementById('mixedUnitType1').value;
                    const unit1 = document.getElementById('mixedUnit1').value;
                    const level1 = document.getElementById('mixedLevel1').value;
                    const unitType2 = document.getElementById('mixedUnitType2').value;
                    const unit2 = document.getElementById('mixedUnit2').value;
                    const level2 = document.getElementById('mixedLevel2').value;
                    
                    UnitComparison.compareUnits(
                        unitType1, unit1, level1, 
                        unitType2, unit2, level2, 
                        'mixedComparisonResults', 
                        'mixedComparisonTable', 
                        'mixedComparisonChart',
                        'mixedCompare1Header',
                        'mixedCompare2Header'
                    );
                });
                
                // Infantry equivalent level calculator
                document.getElementById('calculateInfantryEquivBtn').addEventListener('click', function() {
                    const unit = document.getElementById('infantryEquivUnit').value;
                    const level = document.getElementById('infantryEquivLevel').value;
                    const targetUnit = unit === 'helios' ? 'dominant' : 'helios';
                    
                    UnitComparison.findEquivalentLevel(
                        'infantry', unit, level, 
                        'infantry', targetUnit, 
                        'infantryEquivResults', 
                        'infantryEquivText'
                    );
                });
                
                // Archers equivalent level calculator
                document.getElementById('calculateArchersEquivBtn').addEventListener('click', function() {
                    const unit = document.getElementById('archersEquivUnit').value;
                    const level = document.getElementById('archersEquivLevel').value;
                    const targetUnit = unit === 'helios' ? 'dominant' : 'helios';
                    
                    UnitComparison.findEquivalentLevel(
                        'archers', unit, level, 
                        'archers', targetUnit, 
                        'archersEquivResults', 
                        'archersEquivText'
                    );
                });
                
                // Battle simulation
                document.getElementById('simulateBattleBtn').addEventListener('click', function() {
                    // Get Helios units data
                    const heliosInfLevel = document.getElementById('heliosInfantryLevel').value;
                    const heliosInfCount = parseInt(document.getElementById('heliosInfantryCount').value) || 0;
                    const heliosArcLevel = document.getElementById('heliosArchersLevel').value;
                    const heliosArcCount = parseInt(document.getElementById('heliosArchersCount').value) || 0;
                    
                    // Get Dominant units data
                    const dominantInfLevel = document.getElementById('dominantInfantryLevel').value;
                    const dominantInfCount = parseInt(document.getElementById('dominantInfantryCount').value) || 0;
                    const dominantArcLevel = document.getElementById('dominantArchersLevel').value;
                    const dominantArcCount = parseInt(document.getElementById('dominantArchersCount').value) || 0;
                    
                    // Simulate battle
                    const battleResult = BattleSimulator.simulateBattle(
                        heliosInfLevel, heliosInfCount, heliosArcLevel, heliosArcCount,
                        dominantInfLevel, dominantInfCount, dominantArcLevel, dominantArcCount
                    );
                    
                    // Display battle stats
                    BattleSimulator.displayBattleStats(
                        document.getElementById('heliosBattleStats'), 
                        battleResult.heliosStats
                    );
                    
                    BattleSimulator.displayBattleStats(
                        document.getElementById('dominantBattleStats'), 
                        battleResult.dominantStats
                    );
                    
                    // Display battle conclusion
                    document.getElementById('battleConclusion').innerHTML = battleResult.battleSummary.summary;
                    
                    // Create battle result chart
                    ChartConfig.createBattleResultChart(
                        'battleResultChart', 
                        battleResult.heliosStats, 
                        battleResult.dominantStats
                    );
                    
                    // Show battle results
                    document.getElementById('battleResults').style.display = 'block';
                });
                
                // Handle tab switching events to resize charts
                const tabLinks = document.querySelectorAll('button[data-bs-toggle="tab"]');
                tabLinks.forEach(tabLink => {
                    tabLink.addEventListener('shown.bs.tab', function() {
                        // Trigger resize event to fix chart display
                        window.dispatchEvent(new Event('resize'));
                    });
                });
            }
        });
    </script>

<div style="text-align:center; margin-top:20px;">
<p>شارك الصفحة:</p>
<a href="https://wa.me/?text=شاهد%20هذا%20الموقع:%20" style="margin-right:10px;" target="_blank">
<img alt="WhatsApp" src="https://img.icons8.com/color/48/000000/whatsapp--v1.png" width="32"/>
</a>
<a href="https://t.me/share/url?url=" target="_blank">
<img alt="Telegram" src="https://img.icons8.com/color/48/000000/telegram-app.png" width="32"/>
</a>
</div>

<script>
  function checkAccessGranted() {
    const ytClicked = localStorage.getItem('subscribedYT') === 'true';
    const discordClicked = localStorage.getItem('joinedDiscord') === 'true';
    if (ytClicked && discordClicked) {
      document.getElementById('subscriptionOverlay').style.display = 'none';
    }
  }

  document.getElementById('subscribeYTBtn').onclick = function() {
    localStorage.setItem('subscribedYT', 'true');
    window.open("https://youtube.com/@whiteoutsurvivel", "_blank");
    checkAccessGranted();
  };

  document.getElementById('joinDiscordBtn').onclick = function() {
    localStorage.setItem('joinedDiscord', 'true');
    window.open("https://discord.gg/yEKvcA5eBq", "_blank");
    checkAccessGranted();
  };

  window.onload = checkAccessGranted;
</script>

<script>
  function checkAccessGranted() {
    const ytClicked = localStorage.getItem('subscribedYT') === 'true';
    const discordClicked = localStorage.getItem('joinedDiscord') === 'true';

    if (ytClicked) {
      document.getElementById('subscribeYTBtn').classList.add('subscribed');
    }
    if (discordClicked) {
      document.getElementById('joinDiscordBtn').classList.add('subscribed');
    }

    if (ytClicked && discordClicked) {
      document.getElementById('subscriptionOverlay').style.display = 'none';
    }
  }

  document.getElementById('subscribeYTBtn').onclick = function() {
    localStorage.setItem('subscribedYT', 'true');
    this.classList.add('subscribed');
    window.open("https://youtube.com/@whiteoutsurvivel", "_blank");
    checkAccessGranted();
  };

  document.getElementById('joinDiscordBtn').onclick = function() {
    localStorage.setItem('joinedDiscord', 'true');
    this.classList.add('subscribed');
    window.open("https://discord.gg/yEKvcA5eBq", "_blank");
    checkAccessGranted();
  };

  window.onload = checkAccessGranted;
</script>

<!-- Modal Overlay for Subscription -->
<div id="subscriptionModal" style="position:fixed;top:0;left:0;width:100%;height:100%;
background-color:rgba(0,0,0,0.6);backdrop-filter:blur(4px);z-index:99999;
display:none;align-items:center;justify-content:center;font-family:'Cairo',sans-serif;">
  <div style="background-color:#fff;padding:30px;border-radius:12px;text-align:center;max-width:90%;box-shadow:0 0 20px rgba(0,0,0,0.3);">
    <h4 style="margin-bottom:20px;">يرجى الاشتراك في القناة والانضمام إلى Discord لتفعيل هذه الميزة</h4>
    <div style="display:flex;gap:15px;justify-content:center;flex-wrap:wrap;">
      <a id="modalSubscribeYT" href="#" class="btn btn-danger">اشترك في YouTube</a>
      <a id="modalJoinDiscord" href="#" class="btn btn-primary">انضم إلى Discord</a>
    </div>
  </div>
</div>

<script>
  // منع النسخ
  document.addEventListener("contextmenu", function(e){ e.preventDefault(); });
  document.addEventListener("copy", function(e){ e.preventDefault(); });

  // عرض المودال عند محاولة استخدام الميزات المقيدة
  function requireSubscription(actionCallback) {
    const yt = localStorage.getItem("subscribedYT") === "true";
    const ds = localStorage.getItem("joinedDiscord") === "true";
    if (yt && ds) {
      actionCallback(); // تنفيذ الفعل
    } else {
      document.getElementById("subscriptionModal").style.display = "flex";
    }
  }

  document.getElementById("modalSubscribeYT").onclick = function() {
    localStorage.setItem("subscribedYT", "true");
    window.open("https://youtube.com/@whiteoutsurvivel", "_blank");
    checkIfCanCloseModal();
  };

  document.getElementById("modalJoinDiscord").onclick = function() {
    localStorage.setItem("joinedDiscord", "true");
    window.open("https://discord.gg/yEKvcA5eBq", "_blank");
    checkIfCanCloseModal();
  };

  function checkIfCanCloseModal() {
    const yt = localStorage.getItem("subscribedYT") === "true";
    const ds = localStorage.getItem("joinedDiscord") === "true";
    if (yt && ds) {
      document.getElementById("subscriptionModal").style.display = "none";
    }
  }

  // حماية الأزرار: قارن ومقارنة المعركة
  window.onload = function() {
    // قائمة أزرار الفحص
    const protectedButtons = [
      { id: "compareInfantryBtn", original: function() { document.getElementById("compareInfantryBtn").click(); }},
      { id: "compareArchersBtn", original: function() { document.getElementById("compareArchersBtn").click(); }},
      { id: "compareMixedBtn", original: function() { document.getElementById("compareMixedBtn").click(); }},
      { id: "simulateBattleBtn", original: function() { document.getElementById("simulateBattleBtn").click(); }}
    ];

    // استبدال الأزرار بمنطق الاشتراك
    protectedButtons.forEach(item => {
      const btn = document.getElementById(item.id);
      if (btn) {
        const clone = btn.cloneNode(true);
        const parent = btn.parentNode;
        clone.onclick = function(e) {
          e.preventDefault();
          requireSubscription(() => btn.click());
        };
        parent.replaceChild(clone, btn);
      }
    });

    // تحقق مبدئي لإغلاق المودال في حال تحقق الشرط
    checkIfCanCloseModal();
  };
</script>


<script>
// تعديل قوة الوحدات لتشمل ضرر إضافي 10% للرماة ضد المشاة
const originalCalculateBattleStats = window.calculateBattleStats;

window.calculateBattleStats = function(infantryData, infantryCount, archersData, archersCount, enemyInfantryCount) {
  let infantryPower = 0;
  let archersPower = 0;

  if (infantryData) {
    infantryPower = (infantryData.attack + infantryData.defense + infantryData.health + infantryData.lethality) * infantryCount;
  }

  if (archersData) {
    let bonus = 0;
    if (enemyInfantryCount > 0) {
      bonus = 0.10; // 10% bonus damage to infantry
    }
    const base = archersData.attack + archersData.defense + archersData.health + archersData.lethality;
    archersPower = (base + (archersData.attack * bonus)) * archersCount;
  }

  return {
    infantry: {
      ...infantryData,
      count: infantryCount,
      totalPower: infantryPower
    },
    archers: {
      ...archersData,
      count: archersCount,
      totalPower: archersPower
    },
    totalPower: infantryPower + archersPower,
    totalUnits: infantryCount + archersCount
  };
};

// إعادة تعريف محاكاة المعركة لتضم اختيار المهاجم
const originalSimulate = window.simulateBattleBtnClick;

document.getElementById("simulateBattleBtn").onclick = function() {
  const attacker = document.querySelector("input[name='attacker']:checked").value;

  const heliosInfLevel = parseInt(document.getElementById("heliosInfantryLevel").value);
  const heliosInfCount = parseInt(document.getElementById("heliosInfantryCount").value);
  const heliosArcLevel = parseInt(document.getElementById("heliosArchersLevel").value);
  const heliosArcCount = parseInt(document.getElementById("heliosArchersCount").value);

  const dominantInfLevel = parseInt(document.getElementById("dominantInfantryLevel").value);
  const dominantInfCount = parseInt(document.getElementById("dominantInfantryCount").value);
  const dominantArcLevel = parseInt(document.getElementById("dominantArchersLevel").value);
  const dominantArcCount = parseInt(document.getElementById("dominantArchersCount").value);

  const heliosInfantry = DataParser.getUnitDataByLevel('infantry', 'helios', heliosInfLevel);
  const heliosArchers = DataParser.getUnitDataByLevel('archers', 'helios', heliosArcLevel);
  const dominantInfantry = DataParser.getUnitDataByLevel('infantry', 'dominant', dominantInfLevel);
  const dominantArchers = DataParser.getUnitDataByLevel('archers', 'dominant', dominantArcLevel);

  const heliosStats = calculateBattleStats(heliosInfantry, heliosInfCount, heliosArchers, heliosArcCount, dominantInfCount);
  const dominantStats = calculateBattleStats(dominantInfantry, dominantInfCount, dominantArchers, dominantArcCount, heliosInfCount);

  const heliosPower = heliosStats.totalPower;
  const dominantPower = dominantStats.totalPower;

  // عرض النتائج
  document.getElementById("battleResults").style.display = "block";
  BattleSimulator.displayBattleStats(document.getElementById("heliosBattleStats"), heliosStats);
  BattleSimulator.displayBattleStats(document.getElementById("dominantBattleStats"), dominantStats);

  const summary = BattleSimulator.generateBattleSummary(heliosStats, dominantStats);
  document.getElementById("battleConclusion").textContent = summary.summary;

  
ChartConfig.createBattleResultChart("battleResultChart", heliosStats, dominantStats);
renderComparisonChart(heliosStats, dominantStats);

};
</script>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<canvas id="battleComparisonChart" style="max-width: 100%; margin-top: 40px;"></canvas>
<script>
function renderComparisonChart(helios, dominant) {
  const ctx = document.getElementById('battleComparisonChart').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['قوات هيليوس', 'قوات المهيمنين'],
      datasets: [{
        label: 'القوة الإجمالية',
        data: [helios.totalPower, dominant.totalPower],
        backgroundColor: ['#dc3545', '#ffc107'],
        borderColor: ['#a71d2a', '#cc9a06'],
        borderWidth: 1
      }]
    },
    options: {
      indexAxis: 'y',
      responsive: true,
      plugins: {
        legend: { display: false },
        tooltip: {
          callbacks: {
            label: function(context) {
              return 'القوة: ' + context.parsed.x;
            }
          }
        }
      },
      scales: {
        x: {
          beginAtZero: true
        }
      }
    }
  });
}
</script>


<script>
  document.getElementById("simulateBattleBtn").onclick = function() {
    const attacker = document.querySelector("input[name='attacker']:checked").value;

    const heliosInfLevel = parseInt(document.getElementById("heliosInfantryLevel").value);
    const heliosInfCount = parseInt(document.getElementById("heliosInfantryCount").value);
    const heliosArcLevel = parseInt(document.getElementById("heliosArchersLevel").value);
    const heliosArcCount = parseInt(document.getElementById("heliosArchersCount").value);

    const dominantInfLevel = parseInt(document.getElementById("dominantInfantryLevel").value);
    const dominantInfCount = parseInt(document.getElementById("dominantInfantryCount").value);
    const dominantArcLevel = parseInt(document.getElementById("dominantArchersLevel").value);
    const dominantArcCount = parseInt(document.getElementById("dominantArchersCount").value);

    const heliosInf = DataParser.getUnitDataByLevel('infantry', 'helios', heliosInfLevel);
    const heliosArc = DataParser.getUnitDataByLevel('archers', 'helios', heliosArcLevel);
    const dominantInf = DataParser.getUnitDataByLevel('infantry', 'dominant', dominantInfLevel);
    const dominantArc = DataParser.getUnitDataByLevel('archers', 'dominant', dominantArcLevel);

    function calculateCombatPower(unit, count, target, isArcher, isAttacker) {
      if (!unit || count <= 0 || !target) return 0;
      let effectiveAttack = unit.attack;
      if (isArcher && isAttacker) {
        effectiveAttack *= 1.1; // زيادة 10% على هجوم الرماة المهاجمين
      }
      const attackVsDefense = effectiveAttack - target.defense;
      const lethalityVsHealth = unit.lethality - target.health;
      const total = Math.max(0, attackVsDefense + lethalityVsHealth);
      return total * count;
    }

    const heliosPower =
      calculateCombatPower(heliosInf, heliosInfCount, dominantInf, false, attacker === "helios") +
      calculateCombatPower(heliosArc, heliosArcCount, dominantInf, true, attacker === "helios");

    const dominantPower =
      calculateCombatPower(dominantInf, dominantInfCount, heliosInf, false, attacker === "dominant") +
      calculateCombatPower(dominantArc, dominantArcCount, heliosInf, true, attacker === "dominant");

    // عرض النتائج
    document.getElementById("battleResults").style.display = "block";
    document.getElementById("heliosBattleStats").innerHTML = "<p><strong>القوة القتالية المحسوبة:</strong> " + heliosPower + "</p>";
    document.getElementById("dominantBattleStats").innerHTML = "<p><strong>القوة القتالية المحسوبة:</strong> " + dominantPower + "</p>";

    const summary = BattleSimulator.generateBattleSummary(
      { totalPower: heliosPower, totalUnits: heliosInfCount + heliosArcCount },
      { totalPower: dominantPower, totalUnits: dominantInfCount + dominantArcCount }
    );
    document.getElementById("battleConclusion").textContent = summary.summary;

    ChartConfig.createBattleResultChart("battleResultChart", 
      { totalPower: heliosPower }, { totalPower: dominantPower });
    
renderComparisonChart({ totalPower: heliosPower }, { totalPower: dominantPower });
renderDetailChart(
  { attack: heliosArc.attack * (attacker === "helios" ? 1.1 : 1), lethality: heliosArc.lethality, defense: dominantInf.defense, health: dominantInf.health },
  { attack: dominantArc.attack * (attacker === "dominant" ? 1.1 : 1), lethality: dominantArc.lethality, defense: heliosInf.defense, health: heliosInf.health }
);

  };
</script>

<canvas id="detailsComparisonChart" style="max-width: 100%; margin-top: 40px;"></canvas>
<script>
function renderDetailChart(helios, dominant) {
  const ctx = document.getElementById('detailsComparisonChart').getContext('2d');

  const heliosAttackVsDef = helios.attack - dominant.defense;
  const heliosLethalityVsHealth = helios.lethality - dominant.health;

  const dominantAttackVsDef = dominant.attack - helios.defense;
  const dominantLethalityVsHealth = dominant.lethality - helios.health;

  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['هجوم - دفاع', 'فتك - صحة'],
      datasets: [
        {
          label: 'هيليوس',
          data: [heliosAttackVsDef, heliosLethalityVsHealth],
          backgroundColor: 'rgba(220, 53, 69, 0.6)',
          borderColor: '#dc3545',
          borderWidth: 1
        },
        {
          label: 'المهيمنين',
          data: [dominantAttackVsDef, dominantLethalityVsHealth],
          backgroundColor: 'rgba(255, 193, 7, 0.6)',
          borderColor: '#ffc107',
          borderWidth: 1
        }
      ]
    },
    options: {
      responsive: true,
      scales: {
        y: { beginAtZero: true }
      },
      plugins: {
        tooltip: {
          callbacks: {
            label: function(context) {
              return `${context.dataset.label}: ${context.parsed.y}`;
            }
          }
        }
      }
    }
  });
}
</script>


<div style="background: linear-gradient(to right, #f12711, #f5af19); color: white;
text-align: center; padding: 15px; font-weight: bold; font-size: 16px;">
  قريباً سيتم إضافة الأبطال وباقي القوات إلى المحاكاة!
</div>


<div style="text-align:center; margin-top: 15px;">
  <img src="https://i.imgur.com/ILDYdk4.jpeg" alt="وحدات اللعبة" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 0 10px rgba(0,0,0,0.3);">
</div>


<script>
document.addEventListener('DOMContentLoaded', function () {
  const discordLinks = document.querySelectorAll('a[href*="discord.gg"]');
  const youtubeLinks = document.querySelectorAll('a[href*="youtube.com"]');

  discordLinks.forEach(link => {
    link.addEventListener('click', function () {
      gtag('event', 'click', {
        'event_category': 'Outbound Link',
        'event_label': 'Discord'
      });
    });
  });

  youtubeLinks.forEach(link => {
    link.addEventListener('click', function () {
      gtag('event', 'click', {
        'event_category': 'Outbound Link',
        'event_label': 'YouTube'
      });
    });
  });
});
</script>


<a id="subscribeYTBtn" href="https://youtube.com/@whiteoutsurvivel" target="_blank"
   onclick="gtag('event', 'click', { 'event_category': 'engagement', 'event_label': 'YouTube Subscribe' });"
   style="display:block; text-align:center; padding:10px; font-weight:bold; font-size:18px; color:white; background:red; margin-bottom:10px;">
   اشترك في YouTube
</a>


<a id="joinDiscordBtn" href="https://discord.gg/yEKvcA5eBq" target="_blank"
   onclick="gtag('event', 'click', { 'event_category': 'engagement', 'event_label': 'Discord Join' });"
   style="display:block; text-align:center; padding:10px; font-weight:bold; font-size:18px; color:white; background:#5865F2;">
   انضم إلى Discord
</a>


<script>
  function trackEvent(eventName) {
    if (typeof gtag === "function") {
      gtag('event', eventName, {
        event_category: 'subscription',
        event_label: 'overlay_button'
      });
    }
  }

  document.addEventListener('DOMContentLoaded', function () {
    var ytBtn = document.getElementById('subscribeYTBtn');
    var dcBtn = document.getElementById('joinDiscordBtn');

    if (ytBtn) {
      ytBtn.addEventListener('click', function () {
        trackEvent('subscribe_youtube');
      });
    }

    if (dcBtn) {
      dcBtn.addEventListener('click', function () {
        trackEvent('join_discord');
      });
    }
  });
</script>


<!-- Final Tracking Script -->
<script>
  function trackEvent(eventName) {
    if (typeof gtag === "function") {
      gtag('event', eventName, {
        event_category: 'user_interaction',
        event_label: 'click'
      });
    }
  }

  document.addEventListener('DOMContentLoaded', function () {
    var ytOverlay = document.getElementById('subscribeYTBtn');
    var dcOverlay = document.getElementById('joinDiscordBtn');
    var ytFooter = document.querySelector('a[href*="youtube.com"]');
    var tgFooter = document.querySelector('a[href*="t.me"]');
    var dcFooter = document.querySelector('a[href*="discord.gg"]');

    if (ytOverlay) ytOverlay.addEventListener('click', () => trackEvent('subscribe_youtube'));
    if (dcOverlay) dcOverlay.addEventListener('click', () => trackEvent('join_discord'));
    if (ytFooter) ytFooter.addEventListener('click', () => trackEvent('footer_youtube'));
    if (tgFooter) tgFooter.addEventListener('click', () => trackEvent('footer_telegram'));
    if (dcFooter) dcFooter.addEventListener('click', () => trackEvent('footer_discord'));
  });
</script>

<!-- Protection Script -->
<script>
  document.addEventListener("contextmenu", function(e){ e.preventDefault(); });
  document.addEventListener("copy", function(e){ e.preventDefault(); });
  document.addEventListener("keydown", function(e){
    if (e.ctrlKey && (e.key === 'u' || e.key === 's' || e.key === 'c')) {
      e.preventDefault();
    }
  });
</script>
<style>
  body {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
</style>

</body>




</html>
